<launch>
  <!-- Set tf -->
  <node pkg="tf" type="static_transform_publisher" name="world_to_map" args="0 0 0 0 0 0 world map 100" />
  <node pkg="tf" type="static_transform_publisher" name="map_to_grid" args="-0.4 -0.4 0 1.57 3.14 0 map map_grid 100" />

  <!-- Launch the map server  -->
  <arg name="map_file" default="$(find value_iteration)/maps/ueda_room_small.yaml"/>
  <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" output="screen" />

  <!-- Launch the value_iteration node -->
  <node pkg="value_iteration" name="vi_node" type="vi_node" output="screen" required="true" />
  <node pkg="value_iteration" name="vi_control" type="vi_control.py" output="screen" required="true" />

  <!-- Load the grid config -->
  <rosparam command="load" file="$(find vi_grid_map_ros)/config/image_to_vi_gridmap.yaml" />

  <!-- Load the image -->
  <node pkg="vi_grid_map_ros" type="image_publisher" name="image_publisher" output="screen">
    <param name="image_path" value="/tmp/value_t=0.pgm" />
    <param name="image_topic" value="image" />
  </node>

  <!-- Launch the grid map image to grid map demo node -->
  <node pkg="vi_grid_map_ros" type="image_to_vi_gridmap" name="image_to_vi_gridmap" output="screen" />

  <!-- Launch the grid map visualizer -->
  <node pkg="grid_map_visualization" type="grid_map_visualization" name="grid_map_visualization" output="screen" />
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find value_iteration)/config/conf.rviz"/>
</launch>
